<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SOK-2014 Forelesning 4 - Nyttekostnadsanalyse i teori og praksis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Forelesning_1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Forelesning_1_files/libs/quarto-html/quarto.js"></script>
<script src="Forelesning_1_files/libs/quarto-html/popper.min.js"></script>
<script src="Forelesning_1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Forelesning_1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Forelesning_1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Forelesning_1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Forelesning_1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Forelesning_1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Forelesning_1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SOK-2014 Forelesning 4 - Nyttekostnadsanalyse i teori og praksis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="litt-om-kurset" class="level1">
<h1>Litt om kurset</h1>
<p>Alle innleveringer vil handle om ett case som dere skal jobbe med gjennom hele semesteret * To obligatoriske innleveringer (arbeidskrav) * Presentasjon (arbeidskrav) * Prosjektoppgave (karaktergivende) * Fra 1-3 i hver gruppe * Prosjektet dere skal jobbe med er å lage en samfunnsøkonomisk utredning av Elektrifisering av Melkøya</p>
</section>
<section id="hva-innebærer-elektrifisering-av-melkøya" class="level1">
<h1>Hva innebærer elektrifisering av Melkøya?</h1>
<p>På Melkøya ligger landanlegget som driver gassutvinningen til Snøhvitfeltet. Litt av gassen brukes til å generer strømmen som anlegget bruker. Utslippene fra gasskraftverket på Melkøya utgjør ca. 2 prosent av norske utslipp. Norge er en del av EUs kvotemarked, så Equinor kjøper i dag CO2-kvoter for utslippene og har en nasjonal målsetting om 50-55 prosent reduksjon i CO2 utslipp innen 2030. EU har vedtatt det samme, men i motsetning til andre EU-land har Stortinget vedtatt at alle kuttene skal tas innenlands. Det betyr at Norge må kutte til en høyere kostnad enn kvoteprisen i EU. Regjeringen og Equinor ønsker å kutte utslippene fra Snøhvitfeltet ved å legge ned gasskraftverket som forsyner feltet. Regjeringen og Equinor ønsker i stedet å ta kraften fra elforsyningen på fastlandet</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/melkoya.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Melkøya</figcaption>
</figure>
</div>
</section>
<section id="hva-er-tiltaket" class="level1">
<h1>Hva er tiltaket?</h1>
<ul>
<li>Å legge ned gasskraftverket på Melkøya</li>
<li>Å legge kraftlinje mellom Skaidi og Hammerfest</li>
<li>Å dekke Snøhvitfeltets kraftbehov med kraft fra nettet i Finmark.</li>
</ul>
</section>
<section id="hva-må-utredes" class="level1">
<h1>Hva må utredes?</h1>
<ul>
<li>Kostnadene ved å bygge kraftledningen og forsyne anlegget med landstrøm</li>
<li>Besparelsen i CO2-kvoter</li>
<li>Annen nytte-kostnad</li>
</ul>
</section>
<section id="innleveringene" class="level1">
<h1>Innleveringene</h1>
<section id="obligatorisk-innlevering-1-fase-1-3-ihht-veilederen" class="level2">
<h2 class="anchored" data-anchor-id="obligatorisk-innlevering-1-fase-1-3-ihht-veilederen">Obligatorisk innlevering 1 (Fase 1-3 ihht veilederen):</h2>
<ul>
<li>Gjør en vurdering av tiltaket ihht. DFØs veileder og identifiser hvilken informasjon som trengs og hvilke forutsetninger som må gjøres</li>
<li>Innhent informasjon</li>
<li>Sett opp en disposisjon/arbeidsplan (bruk veilederen)</li>
</ul>
</section>
<section id="obligatorisk-innlevering-2-fase-3-5" class="level2">
<h2 class="anchored" data-anchor-id="obligatorisk-innlevering-2-fase-3-5">Obligatorisk innlevering 2 (Fase 3-5):</h2>
<ul>
<li>Bruke det du har lært til å sette opp en nytte-kostnadsanalyse</li>
<li>Beregne nåverdi av prosjektet</li>
</ul>
</section>
<section id="endelig-innlevering-fase-1-8" class="level2">
<h2 class="anchored" data-anchor-id="endelig-innlevering-fase-1-8">Endelig innlevering (Fase 1-8):</h2>
<ul>
<li>Forbedre det som er gjort i tidligere innleveringer</li>
<li>Lever en endelig utredning av tiltaket.</li>
<li>Utredningen bør ha samme form som eksemplene i pensum.</li>
<li>Målet er en rapport som kunne vært presentert for Stortinget og Olje- og energidepartementet som grunnlag for en beslutning om elektrifisering.</li>
</ul>
</section>
</section>
<section id="nytte-kostnadsanalyse" class="level1">
<h1>Nytte-kostnadsanalyse</h1>
<p>Nytte-kostnadsanalyse er en utredning av offentlige prosjekter som skal hjelpe politikerne og offentlige institusjoner til å prioritere prosjekter. Det skal være en faglig vurdering og så objektiv som mulig. <a href="https://dfo.no/fagomrader/utredning-og-analyse-av-statlige-tiltak/samfunnsokonomiske-analyser/veileder-i-samfunnsokonomiske-analyser">DFØ har en veileder som skal standardisere prosessen</a></p>
<p>Det er flere grunner til å gjennomføre samfunnsøkonomiske analyser * Mest mulig velferd ut av samfunnets knappe ressurser ved å sørge for effektiv ressursbruk * En systematisk gjennomgang av alle virkninger for berørte grupper i samfunnet * Et godt beslutningsgrunnlag for å rangere og prioritere mellom alternative tiltak * Sile ut ulønnsomme tiltak på et tidlig tidspunkt * Et godt grunnlag for å realisere gevinster når tiltaket er iverksatt * Et godt grunnlag for resultatmåling og evaluering av tiltaket i etterkant * Gjøre grunnlaget for beslutninger om offentlige tiltak mer synlig for offentligheten</p>
<section id="hva-brukes-en-samfunnsøkonomisk-analyse-til" class="level2">
<h2 class="anchored" data-anchor-id="hva-brukes-en-samfunnsøkonomisk-analyse-til">Hva brukes en samfunnsøkonomisk analyse til?</h2>
<ul>
<li>På alle typer offentlige tiltak: reguleringer, investeringer, tjenesteproduksjon, reformer osv.</li>
<li>På tiltak utført av private aktører på oppdrag for staten</li>
<li>Innenfor alle sektorer i samfunnet</li>
<li>På prioriteringer innenfor en virksomhets ansvarsområder, innad i en sektor eller på tvers av ulike sektorer</li>
</ul>
</section>
<section id="en-samfunnsøkonomisk-analyse-skal" class="level2">
<h2 class="anchored" data-anchor-id="en-samfunnsøkonomisk-analyse-skal">En samfunnsøkonomisk analyse skal</h2>
<ul>
<li>Ta hensyn til økonomisk kvantifiserbare effekter (prissatte virkninger)</li>
<li>Ta hensyn til ikke-kvantifiserbare effekter (ikke-prissatte virkninger)</li>
<li>I så stor grad som mulig/hensiktsmessig ta med all relevant nytte og alle relevante kostnader</li>
<li>Unngå dobbelttellinger/glemme alternativ anvendelse</li>
<li>Ikke ta politiske hensyn</li>
<li>Inneholde en usikkerhetsanalyse</li>
<li>Beskrive fordelingsvirkninger</li>
<li>Gi en samlet vurdering</li>
</ul>
</section>
</section>
<section id="eksempel-ny-kvaløyaforbindelse" class="level1">
<h1>Eksempel: Ny kvaløyaforbindelse</h1>
<p>Fra rapporten:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/kvaloya.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Ny kvaløyaforbindelse</figcaption>
</figure>
</div>
<section id="prissatte-konsekvenser" class="level2">
<h2 class="anchored" data-anchor-id="prissatte-konsekvenser">Prissatte konsekvenser:</h2>
<p>Fra rapporten:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/kvaloya_tabell.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Tabell prissatte konsekvenser</figcaption>
</figure>
</div>
</section>
<section id="ikke-prissatte-konsekvenser" class="level2">
<h2 class="anchored" data-anchor-id="ikke-prissatte-konsekvenser">Ikke prissatte konsekvenser:</h2>
<section id="landskapsbilde" class="level3">
<h3 class="anchored" data-anchor-id="landskapsbilde">Landskapsbilde</h3>
<p>Alternativ C1 kommer best ut. Alternativene som inneholder Kvaløyforbindelsene B2 og B3, samt B7 (Holt) kommer dårligst ut, og resultatet er at disse alternativene har middels til stor negativ konsekvens for landskapsbilde. Øvrige alternativ har middels negativ konsekvens.</p>
<section id="nærmiljø-og-friluftsliv" class="level4">
<h4 class="anchored" data-anchor-id="nærmiljø-og-friluftsliv">Nærmiljø og friluftsliv</h4>
<p>Alternativene som inneholder Kvaløyforbindelsene over Håkøya (B6 og B7) kommer dårligst ut. Resultatet er at disse alternativene har stor negativ konsekvens for nærmiljø og friluftsliv, spesielt gjelder dette B7 som i tillegg berører områder på Holt. Parallell bru (B2) har minst negativ konsekvens for dette temaet. Alternativene som inneholder tverrforbindelsen A4 vil i mindre grad berøre den botaniske hagen i Breivika og kommer således best ut av alternativene for ny tverrforbindelse.</p>
</section>
<section id="naturmangfold" class="level4">
<h4 class="anchored" data-anchor-id="naturmangfold">Naturmangfold</h4>
<p>Alternativene som inneholder Kvaløyforbindelsene B2 og B3 kommer dårligst ut, og resultatet er at disse alternativene har stor til meget stor negativ konsekvens for naturmangfold. Alternativene over Håkøya (B6 og B7) har begge stor negativ konsekvens. C1 har liten negativ konsekvens. Forslag til kommunedelplan for ny tverrforbindelse og ny forbindelse til Kvaløya 12 Statens vegvesen Region nord</p>
</section>
<section id="kulturmiljø" class="level4">
<h4 class="anchored" data-anchor-id="kulturmiljø">Kulturmiljø</h4>
<p>Alternativene som inneholder Kvaløyforbindelsene over Håkøya (B6 og B7) kommer dårligst ut, og resultatet er at disse alternativene har middels til stor negativ konsekvens for kulturmiljø. Øvrige alternativ har middels negativ konsekvens. Det knyttes en del usikkerhet til en del områder (Holt, Langnes), og det vil gjennomføres supplerende markundersøkelser og vurderinger i løpet av barmarksesongen 2015.</p>
</section>
<section id="naturressurser" class="level4">
<h4 class="anchored" data-anchor-id="naturressurser">Naturressurser</h4>
<p>Reindrift: Alternativ som inneholder Kvaløyforbindelsen B3 kommer dårligst ut med middels til stor negativ konsekvens. For øvrige alternativ er konsekvensene satt til middels negativ. Vannressurser: Alternativene som inneholder Kvaløyforbindelsene over Håkøya (B6 og B7) kommer dårligst ut med middels negativ konsekvens. For øvrige alternativene er konsekvensene satt til liten negativ. Jord- og skogbruk: Alternativene som inneholder Kvaløyforbindelsene B3, B6 og B7 kommer dårligst ut med stor negativ konsekvens. Alternativ som inneholder Kvaløyforbindelsen B2 er vurdert til å ha middels til stor negativ konsekvens, C1 til middels negativ konsekvens. Georessurser: Alle alternativene er vurdert til å gi fra liten til middels positiv konsekvens. Årsakene til dette er at det er satt som forutsetning at masseoverskudd er å anse som en ressurs.</p>
</section>
</section>
</section>
<section id="oppsummering-ikke-prissatte-konsekvenser" class="level2">
<h2 class="anchored" data-anchor-id="oppsummering-ikke-prissatte-konsekvenser">Oppsummering ikke-prissatte konsekvenser:</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/kvaloya_ikke_prissatte.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Tabell ikke prissatte konsekvenser</figcaption>
</figure>
</div>
<section id="oppgave" class="level3">
<h3 class="anchored" data-anchor-id="oppgave">Oppgave:</h3>
<p>Er all relevant nytte og alle relevante kostnader tatt med?</p>
</section>
</section>
</section>
<section id="usikkerhetsanalyse" class="level1">
<h1>Usikkerhetsanalyse</h1>
<p>Kvaløyaforbindelseutredningen inneholder ingen usikkerhetsanalyse I utredningen for Nord-Norgebanen ser den slik ut</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/nnb_usikkerhet.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Nordnorgebanen</figcaption>
</figure>
</div>
<p>P50, P15 og P85 er kostnadsanslag hvor sannsynligheten for at kostnadene blir lavere enn tallet er henholdsvis 50%, 15% og 85%. Det er en anlig måte å illustrere usikkerhet</p>
</section>
<section id="fordelingsvirkninger." class="level1">
<h1>Fordelingsvirkninger.</h1>
<p>Kun én av rapportene som er pensum i dette kurset, behandler fordelingsvirkninger. Det kan tyde på at det ikke alltid anses som relevant å ha i rapporter, selv om det står i veilederen.</p>
<p>I veilederen står det at «Formålet med denne arbeidsfasen er å beskrive hvordan virkningene av tiltakene fordeler seg mellom ulike grupper i samfunnet». Videre: «Beskrivelsen av fordelingsvirkningene tas med som en tilleggsanalyse og skal ikke inngå i grunnlaget for selve rangeringen og anbefalingen av tiltak»</p>
</section>
<section id="arbeidsfasene" class="level1">
<h1>Arbeidsfasene</h1>
<ul>
<li>Beskriv problemet og formuler mål</li>
<li>Identifiser og beskriv relevante tiltak</li>
<li>Identifiser og beskrive virkningene</li>
<li>Tallfest, vedsett og vurder virkninger</li>
<li>Vurder samfunnsøkonomisk lønnsomhet</li>
<li>Gjennomfør usikkerhetsanalyse</li>
<li>Beskrive fordelingsvirkninger</li>
<li>Gi en samlet vurdering og anbefal tiltak</li>
</ul>
</section>
<section id="fase-1---beskriv-problemet-og-formuler-mål" class="level1">
<h1>Fase 1 - Beskriv problemet og formuler mål</h1>
<p>Det oppfattes som et problem når dagens situasjon eller utvikling er en annen enn den som er ønsket. I et samfunn finnes det problemer av mange slag uten at det dermed er en samfunnsoppgave å løse alle disse. De problemene som samfunnet kan eller bør løse, kalles samfunnsproblemer.</p>
</section>
<section id="fase-1---problembeskrivelse" class="level1">
<h1>Fase 1 - Problembeskrivelse</h1>
<ol type="1">
<li>Beskriv det observerte problemet.</li>
<li>Beskriv årsakene til problemet.</li>
<li>Beskriv og tallfest de samfunnsmessige konsekvensene av problemet.</li>
</ol>
</section>
<section id="fase-2---hva-er-et-tiltak" class="level1">
<h1>Fase 2 - Hva er et tiltak?</h1>
<ul>
<li>pedagogiske virkemidler, for eksempel veiledning og informasjon</li>
<li>økonomiske virkemidler, for eksempel avgifter eller tilskudd</li>
<li>regulering, for eksempel påbud eller forbud</li>
<li>organisatoriske virkemidler, for eksempel sentralisering eller desentralisering</li>
<li>offentlige tilbud av produkter og tjenester, for eksempel infrastruktur og helsetjenester</li>
<li>offentlige anskaffelser, for eksempel IKT-tjenester og kontorutstyr</li>
</ul>
</section>
<section id="fase-2---stegvis-prosess-for-komme-frem-til-de-relevante-tiltakene" class="level1">
<h1>Fase 2 - Stegvis prosess for komme frem til de relevante tiltakene</h1>
<ul>
<li>Definer mulighetsrommet.</li>
<li>Utforsk mulighetsrommet.</li>
<li>Grovsil tiltakene.</li>
<li>Beskriv tiltakene og vurder utformingen.</li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>